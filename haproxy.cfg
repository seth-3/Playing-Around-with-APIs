global
    daemon
    maxconn 4096
    log stdout local0

defaults
    mode http
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms
    option httplog
    log global

# Frontend - accepts requests from clients
frontend currency_frontend
    bind *:80
    default_backend webapps

# Backend - pool of servers
backend webapps
    balance roundrobin
    option httpchk GET /
    http-check expect status 200
    
    # Add server identification headers
    http-response add-header X-Server-ID %s
    
    server web01 172.20.0.11:8080 check
    server web02 172.20.0.12:8080 check

# Statistics page
frontend stats
    bind *:8404
    stats enable
    stats uri /stats
    stats refresh 30s
    stats admin if TRUE
